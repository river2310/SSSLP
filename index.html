<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo CLUES</title>
    
    <!-- Tailwind CSS for styling --><script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Leaflet.js for maps --><link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <!-- Leaflet MarkerCluster for grouping map markers --><link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <!-- Chart.js for data visualization --><script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    
    <!-- D3.js for CSV parsing --><script src="https://d3js.org/d3.v7.min.js"></script>
    
    <!-- React and Babel for frontend logic --><script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts: Inter --><link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom Styles --><style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light gray-blue background */
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        #map {
            height: 600px;
            border-radius: 0.5rem;
            z-index: 0;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .leaflet-popup-content-wrapper {
            border-radius: 0.5rem;
        }
        .leaflet-popup-content {
            margin: 13px 19px;
            line-height: 1.4;
            min-width: 220px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Constants and Helper Functions
        const DATA_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQjbzFt4pmSA-WFGGjY527FzN81qjhgWKC7KVfKllt-qHjYt6rtOHRoseOhxa0qkcIvsRT6noCc9YIJ/pub?gid=0&single=true&output=csv';

        // --- React Components ---

        // A reusable card component for statistics
        const StatCard = ({ title, value, icon }) => (
            <div className="bg-white p-4 rounded-lg shadow-md flex items-center">
                <div className="bg-green-100 text-green-700 p-3 rounded-full mr-4">
                    {icon}
                </div>
                <div>
                    <p className="text-sm text-gray-500">{title}</p>
                    <p className="text-2xl font-bold text-gray-800">{value}</p>
                </div>
            </div>
        );

        // Map Component using Leaflet.js
        const MapView = ({ data }) => {
            const mapRef = React.useRef(null);
            const markerLayerRef = React.useRef(null);

            React.useEffect(() => {
                if (!mapRef.current) {
                    mapRef.current = L.map('map').setView([23.6345, -102.5528], 5); // Centered on Mexico
                    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'
                    }).addTo(mapRef.current);
                }
            }, []);

            React.useEffect(() => {
                // Clear existing markers
                if (markerLayerRef.current) {
                    mapRef.current.removeLayer(markerLayerRef.current);
                    markerLayerRef.current = null;
                }

                if (data) {
                    const validData = data.filter(d => d.LATITUD && d.LONGITUD && !isNaN(d.LATITUD) && !isNaN(d.LONGITUD));

                    if (validData.length > 0) {
                        const markerCluster = L.markerClusterGroup();
                        
                        validData.forEach(item => {
                            const marker = L.marker([item.LATITUD, item.LONGITUD]);
                            
                            // Construct address string safely
                            const addressParts = [
                                item['TIPO VIALIDAD'],
                                item['VIALIDAD'],
                                item['NÚMERO EXTERIOR'],
                                item['ASENTAMIENTO'],
                                item['CÓDIGO POSTAL'] ? `C.P. ${item['CÓDIGO POSTAL']}` : null
                            ];
                            const fullAddress = addressParts.filter(part => part && part.toUpperCase() !== 'NO ESPECIFICADO' && part.toUpperCase() !== 'SIN DATO' && part.trim() !== '').join(' ');
                            const addressHTML = fullAddress ? `<strong>Domicilio:</strong> ${fullAddress}<br>` : '';
                            const streetViewEmbedUrl = `https://www.google.com/maps?layer=c&cbll=${item.LATITUD},${item.LONGITUD}&cbp=12,0,0,0,0&output=svembed`;

                            marker.bindPopup(`
                                <div class="text-sm" style="width: 260px;">
                                    <strong class="text-base text-green-700">${item['NOMBRE DE LA UNIDAD']}</strong><br>
                                    <strong>CLUES:</strong> ${item['CLUES']}<br>
                                    <strong>Institución:</strong> ${item['NOMBRE DE LA INSTITUCION']}<br>
                                    <strong>Tipo:</strong> ${item['NOMBRE TIPO ESTABLECIMIENTO']}<br>
                                    <strong>Municipio:</strong> ${item['MUNICIPIO']}<br>
                                    ${addressHTML}
                                    ${(item['TELEFONO'] && item['TELEFONO'].toUpperCase() !== 'NO ESPECIFICADO') ? `<strong>Teléfono:</strong> ${item['TELEFONO']}<br>` : ''}
                                    ${(item['CORREO ELECTRONICO'] && item['CORREO ELECTRONICO'].toUpperCase() !== 'NO ESPECIFICADO') ? `<strong>Correo:</strong> ${item['CORREO ELECTRONICO']}<br>` : ''}
                                    <iframe
                                        class="mt-2 w-full h-40 rounded border-0"
                                        loading="lazy"
                                        allowfullscreen
                                        src="${streetViewEmbedUrl}">
                                    </iframe>
                                </div>
                            `);
                            markerCluster.addLayer(marker);
                        });
                        
                        mapRef.current.addLayer(markerCluster);
                        markerLayerRef.current = markerCluster;
                        
                        // Fit map bounds to the markers
                        if (markerCluster.getBounds().isValid()) {
                            mapRef.current.fitBounds(markerCluster.getBounds(), { padding: [50, 50], maxZoom: 16 });
                        }
                    } else {
                        // If no valid data after filtering, reset to default view of Mexico
                        mapRef.current.setView([23.6345, -102.5528], 5);
                    }
                }
            }, [data]);

            return <div id="map" className="shadow-lg"></div>;
        };

        // Chart Component using Chart.js
        const ChartComponent = ({ type, data, options }) => {
            const canvasRef = React.useRef(null);
            const chartRef = React.useRef(null);

            React.useEffect(() => {
                if (chartRef.current) {
                    chartRef.current.destroy();
                }
                const ctx = canvasRef.current.getContext('2d');
                chartRef.current = new Chart(ctx, {
                    type: type,
                    data: data,
                    options: options,
                });

                return () => {
                    if (chartRef.current) {
                        chartRef.current.destroy();
                    }
                };
            }, [data, type, options]);

            return (
                <div className="chart-container">
                    <canvas ref={canvasRef}></canvas>
                </div>
            );
        };
        
        // --- Main App Component ---
        const App = () => {
            const [allData, setAllData] = React.useState([]);
            const [filteredData, setFilteredData] = React.useState([]);
            const [loading, setLoading] = React.useState(true);
            const [error, setError] = React.useState(null);
            
            const [suggestions, setSuggestions] = React.useState([]);
            const searchContainerRef = React.useRef(null);

            const [filters, setFilters] = React.useState({
                search: '',
                institution: 'TODAS',
                municipality: 'TODOS',
                establishmentType: 'TODOS',
            });

            // Data fetching effect
            React.useEffect(() => {
                d3.csv(DATA_URL).then(data => {
                    setAllData(data);
                    setFilteredData(data);
                    setLoading(false);
                }).catch(err => {
                    console.error("Error fetching data:", err);
                    setError("No se pudieron cargar los datos. Por favor, intente de nuevo más tarde.");
                    setLoading(false);
                });
            }, []);
            
            // Filtering logic effect
            React.useEffect(() => {
                let data = allData;

                if (filters.search) {
                    const lowerCaseSearch = filters.search.toLowerCase();
                    data = data.filter(d => 
                        d['CLUES']?.toLowerCase().includes(lowerCaseSearch) || 
                        d['NOMBRE DE LA UNIDAD']?.toLowerCase().includes(lowerCaseSearch)
                    );
                }

                if (filters.institution !== 'TODAS') {
                    data = data.filter(d => d['NOMBRE DE LA INSTITUCION'] === filters.institution);
                }
                
                if (filters.municipality !== 'TODOS') {
                    data = data.filter(d => d['MUNICIPIO'] === filters.municipality);
                }

                if (filters.establishmentType !== 'TODOS') {
                    data = data.filter(d => d['NOMBRE TIPO ESTABLECIMIENTO'] === filters.establishmentType);
                }
                
                setFilteredData(data);
            }, [filters, allData]);

            // Effect to handle clicks outside the search/suggestion box
            React.useEffect(() => {
                const handleClickOutside = (event) => {
                    if (searchContainerRef.current && !searchContainerRef.current.contains(event.target)) {
                        setSuggestions([]);
                    }
                };
                document.addEventListener("mousedown", handleClickOutside);
                return () => {
                    document.removeEventListener("mousedown", handleClickOutside);
                };
            }, [searchContainerRef]);


            // Memoized values for cascading filters
            const uniqueInstitutions = React.useMemo(() => {
                let data = allData;
                if (filters.municipality !== 'TODOS') {
                    data = data.filter(d => d['MUNICIPIO'] === filters.municipality);
                }
                if (filters.establishmentType !== 'TODOS') {
                    data = data.filter(d => d['NOMBRE TIPO ESTABLECIMIENTO'] === filters.establishmentType);
                }
                const institutions = new Set(data.map(d => d['NOMBRE DE LA INSTITUCION']));
                return ['TODAS', ...Array.from(institutions).sort()];
            }, [allData, filters.municipality, filters.establishmentType]);

            const uniqueMunicipalities = React.useMemo(() => {
                let data = allData;
                if (filters.institution !== 'TODAS') {
                    data = data.filter(d => d['NOMBRE DE LA INSTITUCION'] === filters.institution);
                }
                if (filters.establishmentType !== 'TODOS') {
                    data = data.filter(d => d['NOMBRE TIPO ESTABLECIMIENTO'] === filters.establishmentType);
                }
                const municipalities = new Set(data.map(d => d['MUNICIPIO']));
                return ['TODOS', ...Array.from(municipalities).sort()];
            }, [allData, filters.institution, filters.establishmentType]);

            const uniqueEstablishmentTypes = React.useMemo(() => {
                let data = allData;
                if (filters.institution !== 'TODAS') {
                    data = data.filter(d => d['NOMBRE DE LA INSTITUCION'] === filters.institution);
                }
                if (filters.municipality !== 'TODOS') {
                    data = data.filter(d => d['MUNICIPIO'] === filters.municipality);
                }
                const types = new Set(data.map(d => d['NOMBRE TIPO ESTABLECIMIENTO']));
                return ['TODOS', ...Array.from(types).sort()];
            }, [allData, filters.institution, filters.municipality]);


            const handleFilterChange = (e) => {
                const { name, value } = e.target;
                setFilters(prev => ({ ...prev, [name]: value }));
            };

            const handleSearchChange = (e) => {
                const value = e.target.value;
                setFilters(prev => ({ ...prev, search: value }));

                if (value.length > 1) {
                    const lowerCaseValue = value.toLowerCase();
                    const matchingUnits = allData
                        .filter(d => 
                            d['NOMBRE DE LA UNIDAD']?.toLowerCase().includes(lowerCaseValue) ||
                            d['CLUES']?.toLowerCase().includes(lowerCaseValue)
                        )
                        .map(d => d['NOMBRE DE LA UNIDAD'])
                        .filter((value, index, self) => self.indexOf(value) === index);

                    setSuggestions(matchingUnits.slice(0, 7));
                } else {
                    setSuggestions([]);
                }
            };

            const handleSuggestionClick = (suggestion) => {
                setFilters(prev => ({ ...prev, search: suggestion }));
                setSuggestions([]);
            };

            const handleResetFilters = () => {
                setFilters({
                    search: '',
                    institution: 'TODAS',
                    municipality: 'TODOS',
                    establishmentType: 'TODOS',
                });
            };

            // Data processing for charts
            const institutionData = React.useMemo(() => {
                const counts = filteredData.reduce((acc, item) => {
                    acc[item['NOMBRE DE LA INSTITUCION']] = (acc[item['NOMBRE DE LA INSTITUCION']] || 0) + 1;
                    return acc;
                }, {});
                const sorted = Object.entries(counts).sort(([, a], [, b]) => b - a);
                return {
                    labels: sorted.map(d => d[0]),
                    datasets: [{
                        label: 'Unidades',
                        data: sorted.map(d => d[1]),
                        backgroundColor: ['#22c55e', '#16a34a', '#15803d', '#14532d', '#86efac', '#4ade80', '#10b981', '#059669', '#047857', '#065f46'],
                        hoverOffset: 4
                    }]
                };
            }, [filteredData]);

            const topMunicipalitiesData = React.useMemo(() => {
                const counts = filteredData.reduce((acc, item) => {
                    acc[item['MUNICIPIO']] = (acc[item['MUNICIPIO']] || 0) + 1;
                    return acc;
                }, {});
                const sorted = Object.entries(counts).sort(([, a], [, b]) => b - a).slice(0, 10);
                return {
                    labels: sorted.map(d => d[0]),
                    datasets: [{
                        label: 'No. de Unidades',
                        data: sorted.map(d => d[1]),
                        backgroundColor: '#22c55e',
                        borderColor: '#16a34a',
                        borderWidth: 1
                    }]
                };
            }, [filteredData]);
            
            const establishmentTypeData = React.useMemo(() => {
                const counts = filteredData.reduce((acc, item) => {
                    acc[item['NOMBRE TIPO ESTABLECIMIENTO']] = (acc[item['NOMBRE TIPO ESTABLECIMIENTO']] || 0) + 1;
                    return acc;
                }, {});
                const sorted = Object.entries(counts).sort(([, a], [, b]) => b - a);
                return {
                    labels: sorted.map(d => d[0]),
                    datasets: [{
                        label: 'No. de Unidades',
                        data: sorted.map(d => d[1]),
                        backgroundColor: '#4ade80',
                        borderColor: '#22c55e',
                        borderWidth: 1
                    }]
                };
            }, [filteredData]);


            if (loading) {
                return (
                    <div className="flex justify-center items-center h-screen">
                        <div className="text-center">
                            <svg className="animate-spin h-10 w-10 text-green-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                                <path className="opacity-75" fill="currentColor" d="M4 12a8 8
 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p className="mt-2 text-lg font-semibold text-gray-700">Cargando datos...</p>
                        </div>
                    </div>
                );
            }

            if (error) {
                return <div className="text-center text-red-500 p-8">{error}</div>;
            }

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="bg-white shadow-md sticky top-0 z-10">
                        <div className="container mx-auto px-4 py-4 flex justify-between items-center">
                            <div className="flex items-center">
                                {/* <img src="data:image/png;base64,... /> */}
                                <h1 className="text-2xl font-bold text-green-800">Catálogo CLUES</h1>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="container mx-auto p-4 lg:p-6">
                        {/* Filters */}
                        <div className="bg-white p-4 rounded-lg shadow-md mb-6">
                            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 items-end">
                                <div className="relative sm:col-span-2 md:col-span-1">
                                    <label htmlFor="search-input" className="block text-sm font-medium text-gray-700 mb-1">Búsqueda</label>
                                    <div ref={searchContainerRef}>
                                        <input
                                            id="search-input"
                                            type="text"
                                            name="search"
                                            placeholder="Buscar por CLUES o Nombre..."
                                            value={filters.search}
                                            onChange={handleSearchChange}
                                            autoComplete="off"
                                            className="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none"
                                        />
                                        {suggestions.length > 0 && (
                                            <ul className="absolute z-20 w-full bg-white border border-gray-200 rounded-md mt-1 max-h-60 overflow-y-auto shadow-lg">
                                                {suggestions.map((suggestion, index) => (
                                                    <li
                                                        key={index}
                                                        className="p-2 text-sm text-gray-700 hover:bg-green-100 cursor-pointer"
                                                        onClick={() => handleSuggestionClick(suggestion)}
                                                    >
                                                        {suggestion}
                                                    </li>
                                                ))}
                                            </ul>
                                        )}
                                    </div>
                                </div>
                                <div>
                                    <label htmlFor="institution-select" className="block text-sm font-medium text-gray-700 mb-1">Institución</label>
                                    <select id="institution-select" name="institution" value={filters.institution} onChange={handleFilterChange} className="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none">
                                        {uniqueInstitutions.map(inst => <option key={inst} value={inst}>{inst}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label htmlFor="municipality-select" className="block text-sm font-medium text-gray-700 mb-1">Municipio</label>
                                    <select id="municipality-select" name="municipality" value={filters.municipality} onChange={handleFilterChange} className="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none">
                                        {uniqueMunicipalities.map(mun => <option key={mun} value={mun}>{mun}</option>)}
                                    </select>
                                </div>
                                <div>
                                    <label htmlFor="establishment-select" className="block text-sm font-medium text-gray-700 mb-1">Tipo de Unidad</label>
                                    <select id="establishment-select" name="establishmentType" value={filters.establishmentType} onChange={handleFilterChange} className="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none">
                                        {uniqueEstablishmentTypes.map(type => <option key={type} value={type}>{type}</option>)}
                                    </select>
                                </div>
                                <button
                                    onClick={handleResetFilters}
                                    className="w-full p-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 font-semibold"
                                >
                                    Reestablecer
                                </button>
                            </div>
                        </div>

                        {/* Stats */}
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <StatCard title="Total de Unidades" value={allData.length.toLocaleString()} icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" /></svg>} />
                            <StatCard title="Unidades Filtradas" value={filteredData.length.toLocaleString()} icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v10a1 1 0 01-1 1H4a1 1 0 01-1-1V10zM15 10a1 1 0 011-1h2a1 1 0 011 1v10a1 1 0 01-1 1h-2a1 1 0 01-1-1V10z" /></svg>} />
                            <StatCard title="Instituciones" value={uniqueInstitutions.length > 1 ? (uniqueInstitutions.length -1) : 0} icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21v-1a6 6 0 00-5.176-5.97M15 21v-1a6 6 0 00-9-5.197" /></svg>} />
                            <StatCard title="Municipios" value={uniqueMunicipalities.length > 1 ? (uniqueMunicipalities.length - 1) : 0} icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>} />
                        </div>
                        
                        {/* Main Grid: Map and Charts */}
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            {/* Map */}
                            <div className="lg:col-span-2 bg-white p-4 rounded-lg shadow-md">
                                <h2 className="text-xl font-semibold text-gray-700 mb-4">Mapa de Unidades Médicas</h2>
                                <MapView data={filteredData} />
                            </div>
                            
                            {/* Charts Column */}
                            <div className="flex flex-col gap-6">
                                <div className="bg-white p-4 rounded-lg shadow-md">
                                    <h2 className="text-xl font-semibold text-gray-700 mb-2">Distribución por Institución</h2>
                                    <ChartComponent type="doughnut" data={institutionData} options={{ maintainAspectRatio: false, plugins: { legend: { position: 'right', labels: { boxWidth: 12, font: { size: 10 } } } } }} />
                                </div>
                                <div className="bg-white p-4 rounded-lg shadow-md">
                                    <h2 className="text-xl font-semibold text-gray-700 mb-2">Top 10 Municipios</h2>
                                    <ChartComponent type="bar" data={topMunicipalitiesData} options={{ indexAxis: 'y', maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { ticks: { font: { size: 9 } } } } }} />
                                </div>
                                <div className="bg-white p-4 rounded-lg shadow-md">
                                    <h2 className="text-xl font-semibold text-gray-700 mb-2">Distribución por Tipo de Unidad</h2>
                                    <ChartComponent type="bar" data={establishmentTypeData} options={{ maintainAspectRatio: false, plugins: { legend: { display: false } } }} />
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>

</body>
</html>

